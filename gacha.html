<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ã‚¬ãƒãƒ£</title>

<style>
  body {
    font-family: 'Noto Sans JP', sans-serif;
    background: #fbf4dd;
    text-align: center;
    padding: 20px;
  }

  h1 {
    font-size: 32px;
    margin-bottom: 10px;
  }

  #egg {
    width: 200px;
    transition: transform 0.3s ease;
  }

  /* å‰²ã‚Œã‚‹æ™‚ã®æºã‚Œã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
  .shake {
    animation: shake 0.4s infinite;
  }
  @keyframes shake {
    0% { transform: translate(0px, 0px) rotate(0deg); }
    25% { transform: translate(3px, -2px) rotate(1deg); }
    50% { transform: translate(-3px, 2px) rotate(-1deg); }
    75% { transform: translate(2px, -3px) rotate(1deg); }
    100% { transform: translate(0px, 0px) rotate(0deg); }
  }

  #resultImg {
    width: 260px;
    display: none;
    margin: 20px auto;
  }

  #resultText {
    font-size: 24px;
    margin-top: 10px;
    font-weight: bold;
    color: #4b7b3a;
    display: none;
  }

  #gachaBtn {
    margin-top: 20px;
    padding: 14px 28px;
    font-size: 22px;
    background: #7cc76c;
    border-radius: 12px;
    color: white;
    border: none;
  }

  #backBtn {
    position: fixed;
    top: 15px;
    left: 15px;
    background: #4c8f3a;
    color: white;
    padding: 10px 18px;
    border-radius: 20px;
    text-decoration: none;
  }
</style>
</head>

<body>

<a id="backBtn" href="index.html">â† ã‚‚ã©ã‚‹</a>

<h1>ğŸ¥šã‚¬ãƒãƒ£</h1>

<!-- â–¼ ç·´ç¿’ä¸è¶³ã®ã¨ãã€ã“ã“ã‚’æ›¸ãæ›ãˆã‚‹ç”¨ -->
<div id="gachaArea">

  <img id="egg" src="images/0egg.png">

  <button id="gachaBtn" onclick="startGacha()">ã‚¬ãƒãƒ£ã‚’å›ã™</button>

  <img id="resultImg">
  <div id="resultText"></div>

</div>

<script>
/* â–¼ æç«œã‚«ãƒ¼ãƒ‰ä¸€è¦§ */
const cards = [
  { name: "ãƒ†ã‚£ãƒ©ãƒã‚µã‚¦ãƒ«ã‚¹", rare: 5, img: "images/tira.png" },
  { name: "ãƒˆãƒªã‚±ãƒ©ãƒˆãƒ—ã‚¹", rare: 4, img: "images/tori.png" },
  { name: "ã‚¹ãƒ†ã‚´ã‚µã‚¦ãƒ«ã‚¹", rare: 3, img: "images/ste.png" },
  { name: "ãƒ–ãƒ©ã‚­ã‚ªã‚µã‚¦ãƒ«ã‚¹", rare: 3, img: "images/bra.png" },
  { name: "ãƒ—ãƒ†ãƒ©ãƒãƒ‰ãƒ³", rare: 2, img: "images/pte.png" },
  { name: "ã‚¹ãƒ”ãƒã‚µã‚¦ãƒ«ã‚¹", rare: 5, img: "images/spi.png" },
  { name: "ã‚¢ãƒ³ã‚­ãƒ­ã‚µã‚¦ãƒ«ã‚¹", rare: 2, img: "images/an.png" },
  { name: "ãƒ‘ãƒ©ã‚µã‚¦ãƒ­ãƒ­ãƒ•ã‚¹", rare: 4, img: "images/para.png" },
  { name: "ã‚¤ã‚°ã‚¢ãƒãƒ‰ãƒ³", rare: 2, img: "images/igu.png" },
  { name: "ãƒ´ã‚§ãƒ­ã‚­ãƒ©ãƒ—ãƒˆãƒ«", rare: 4, img: "images/vero.png" }
];

/* â–¼ ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚¬ãƒãƒ£åˆ¶é™ãƒã‚§ãƒƒã‚¯ */
let count = Number(localStorage.getItem("practiceCount") || 0);

if (count < 10) {
  document.getElementById("gachaArea").innerHTML = `
    <h2>ã‚¬ãƒãƒ£ã¯ã¾ã å›ã›ã¾ã›ã‚“ğŸ¥²</h2>
    <p style="font-size:22px; color:#555;">ã‚ã¨ <b>${10 - count}</b> å› ãªãã‚Šç·´ç¿’ãŒå¿…è¦ã§ã™</p>
    <a href="hiragana.html"
       style="display:inline-block;margin-top:30px;background:#4c8f3a;color:white;padding:15px 25px;border-radius:10px;text-decoration:none;">
       ã‚Œã‚“ã—ã‚…ã†ãƒšãƒ¼ã‚¸ã¸
    </a>
  `;
}

/* â–¼ ã‚¬ãƒãƒ£é–‹å§‹ */
function startGacha() {

  // 10å›æ¶ˆè²»
  let count = Number(localStorage.getItem("practiceCount") || 0);
  if (count < 10) {
    alert("ç·´ç¿’ãŒè¶³ã‚Šã¾ã›ã‚“ï¼");
    return;
  }
  localStorage.setItem("practiceCount", count - 10);

  const egg = document.getElementById("egg");
  egg.classList.add("shake");

  setTimeout(() => {
    egg.src = "images/egg.png";
  }, 600);

  setTimeout(() => {
    egg.style.display = "none";

    const result = cards[Math.floor(Math.random() * cards.length)];
    const resultImg = document.getElementById("resultImg");
    const resultText = document.getElementById("resultText");

    resultImg.src = result.img;
    resultImg.style.display = "block";
    resultText.style.display = "block";
    resultText.textContent = `${result.name}ï¼ˆâ˜…${result.rare}ï¼‰ãŒå‡ºãŸï¼`;

  }, 1200);
}
</script>

</body>
</html>
